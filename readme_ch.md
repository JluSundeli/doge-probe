## doge-probe说明文档
这是一个自制的电流探头，原型基于开源探头little-bee-B1
原始项目地址:https://github.com/westonb/little-bee-B1
项目来自国外的开源项目little bee Current probe
原始项目设计带宽10MHz，量程5A，使用的校准核心为一款16位的PIC单片机。
由于此开源项目立项较早，因此选用的MCU比较古老，原厂出货量不高，单价偏高。
且原厂使用的开发环境以及下载调试工具在中国保有量不大，且难以使用。
因此本次项目将替换使用的MCU单元，并验证原有电路的性能。

> 按照之前的项目开发记录，有国外玩家使用霍尼韦尔的磁场传感器做到了30MHz的带宽，不清楚这是怎么做到的？可能使用了均衡技术？
> 按照霍尼韦尔官方的手册，典型贷款为5MHz，但是国内玩家普遍实测带宽做到10MHz并不困难。

替换后的主控型号为STM32G473RCT6；片内集成OPA COMPARE DAC ADC等外设，十分适合用于数模混合小应用的开发。

## 性能指标

## 附录1 开发工具版本
#currentProbe #Oscilliscopex


## 附录2 deli的心路历程

### 电源
有关电源部分，原始设计为了考虑便携性能，使用了电池+boost供电的方式，在本设计中并没有使用这种方式，主要出于两点考量。
1、电池是耗材，想用的时候没有电了很蛋疼。在中国找到USB供电比电池容易。
2、以后升级带宽和功能的话，可能会导致系统功耗增加，因此考虑使用USB供电。
3、现代示波器大多有5V的USB前置接口，但是很多示波器的设计中USB的GND与探头GND之间没有隔离，虽然有滤波器处理，但是直流上共通。
为了解决GND之间的共模问题，在输入级使用隔离式DCDC。对于成本敏感的小伙伴可以使用DCDC或者直接使用外置的USB做为电路的主电源。
4、考虑增加DC输入端子,这里其实很有争议，因为充电宝已经足够方便，外置DC端子似乎没有直接的好处。

## 传感器
原始设计使用一个闭口磁环，人肉打磨后使用。
我这里还是想设计成类似Tektronic TCP2020这种推夹的形式，经常在一线的工程师一定能够体会单手操作的重要性。
这样做的好处有两个。
1、磁环和传感器的位置固定了，不存在反复拆装的位置一致性的问题，也不会丢磁头。
2、开口环的打磨十分费力，一旦变成两个半环，打磨会容易很多。

这样做的坏处在于
1、磁路上多出一道气隙，可能会导致存在漏磁
2、对结构的要求变高了，原来的装配中，3D打印即可。现在的设计可能需要考虑滴胶或者树脂塞孔的工艺对磁环进行固定。

## 放大电路，
## 附录2 github问题解决
运行
`ssh -T git@github.com`
出现`Connection Closed by xxx.xxx.xxx.xxx port 22`的问题  
谜一样的能用https但是不能同http，出现此问题的大多数是中国人。可能是中国的互联网不太自由。  
https://docs.github.com/en/authentication/troubleshooting-ssh/using-ssh-over-the-https-port